var N=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var c=(e,t,n)=>(N(e,t,"read from private field"),n?n.call(e):t.get(e)),m=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},f=(e,t,n,r)=>(N(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{r as C}from"./chunk-a7a1a7a3.js";var z=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Q=typeof window>"u"||"Deno"in window;function se(){}function ie(e,t){return typeof e=="function"?e(t):e}function ue(e){return typeof e=="number"&&e>=0&&e!==1/0}function oe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ae(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:h}=e;if(l){if(r){if(t.queryHash!==X(l,t.options))return!1}else if(!R(t.queryKey,l))return!1}if(n!=="all"){const y=t.isActive();if(n==="active"&&!y||n==="inactive"&&y)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||typeof s<"u"&&s!==t.state.fetchStatus||a&&!a(t))}function ce(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(M(t.options.mutationKey)!==M(a))return!1}else if(!R(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function X(e,t){return((t==null?void 0:t.queryKeyHashFn)||M)(e)}function M(e){return JSON.stringify(e,(t,n)=>K(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function R(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!R(e[n],t[n])):!1}function B(e,t){if(e===t)return e;const n=D(e)&&D(t);if(n||K(e)&&K(t)){const r=n?e.length:Object.keys(e).length,s=n?t:Object.keys(t),a=s.length,l=n?[]:{};let h=0;for(let y=0;y<a;y++){const b=n?y:s[y];l[b]=B(e[b],t[b]),l[b]===e[b]&&h++}return r===a&&h===r?e:l}return t}function le(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function D(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function K(e){if(!U(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!U(n)||!n.hasOwnProperty("isPrototypeOf"))}function U(e){return Object.prototype.toString.call(e)==="[object Object]"}function q(e){return new Promise(t=>{setTimeout(t,e)})}function A(e){q(0).then(e)}function fe(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?B(e,t):t}function he(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function ye(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var E,v,O,I,Y=(I=class extends z{constructor(){super();m(this,E,void 0);m(this,v,void 0);m(this,O,void 0);f(this,O,t=>{if(!Q&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){c(this,v)||this.setEventListener(c(this,O))}onUnsubscribe(){var t;this.hasListeners()||((t=c(this,v))==null||t.call(this),f(this,v,void 0))}setEventListener(t){var n;f(this,O,t),(n=c(this,v))==null||n.call(this),f(this,v,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){c(this,E)!==t&&(f(this,E,t),this.onFocus())}onFocus(){this.listeners.forEach(t=>{t()})}isFocused(){var t;return typeof c(this,E)=="boolean"?c(this,E):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},E=new WeakMap,v=new WeakMap,O=new WeakMap,I),Z=new Y,j,w,L,T,$=(T=class extends z{constructor(){super();m(this,j,!0);m(this,w,void 0);m(this,L,void 0);f(this,L,t=>{if(!Q&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){c(this,w)||this.setEventListener(c(this,L))}onUnsubscribe(){var t;this.hasListeners()||((t=c(this,w))==null||t.call(this),f(this,w,void 0))}setEventListener(t){var n;f(this,L,t),(n=c(this,w))==null||n.call(this),f(this,w,t(this.setOnline.bind(this)))}setOnline(t){c(this,j)!==t&&(f(this,j,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return c(this,j)}},j=new WeakMap,w=new WeakMap,L=new WeakMap,T),H=new $;function g(e){return Math.min(1e3*2**e,3e4)}function ee(e){return(e??"online")==="online"?H.isOnline():!0}var V=class{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function de(e){return e instanceof V}function be(e){let t=!1,n=0,r=!1,s,a,l;const h=new Promise((o,i)=>{a=o,l=i}),y=o=>{var i;r||(P(new V(o)),(i=e.abort)==null||i.call(e))},b=()=>{t=!0},u=()=>{t=!1},d=()=>!Z.isFocused()||e.networkMode!=="always"&&!H.isOnline(),_=o=>{var i;r||(r=!0,(i=e.onSuccess)==null||i.call(e,o),s==null||s(),a(o))},P=o=>{var i;r||(r=!0,(i=e.onError)==null||i.call(e,o),s==null||s(),l(o))},k=()=>new Promise(o=>{var i;s=p=>{const S=r||!d();return S&&o(p),S},(i=e.onPause)==null||i.call(e)}).then(()=>{var o;s=void 0,r||(o=e.onContinue)==null||o.call(e)}),F=()=>{if(r)return;let o;try{o=e.fn()}catch(i){o=Promise.reject(i)}Promise.resolve(o).then(_).catch(i=>{var x;if(r)return;const p=e.retry??(Q?0:3),S=e.retryDelay??g,G=typeof S=="function"?S(n,i):S,W=p===!0||typeof p=="number"&&n<p||typeof p=="function"&&p(n,i);if(t||!W){P(i);return}n++,(x=e.onFail)==null||x.call(e,n,i),q(G).then(()=>{if(d())return k()}).then(()=>{t?P(i):F()})})};return ee(e.networkMode)?F():k().then(F),{promise:h,cancel:y,continue:()=>(s==null?void 0:s())?h:Promise.resolve(),cancelRetry:b,continueRetry:u}}function te(){let e=[],t=0,n=u=>{u()},r=u=>{u()};const s=u=>{let d;t++;try{d=u()}finally{t--,t||h()}return d},a=u=>{t?e.push(u):A(()=>{n(u)})},l=u=>(...d)=>{a(()=>{u(...d)})},h=()=>{const u=e;e=[],u.length&&A(()=>{r(()=>{u.forEach(d=>{n(d)})})})};return{batch:s,batchCalls:l,schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u}}}var ve=te(),J=C.createContext(void 0),we=e=>{const t=C.useContext(J);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},pe=({client:e,children:t})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),C.createElement(J.Provider,{value:e},t));export{pe as Q,z as S,Q as a,ve as b,be as c,de as d,ee as e,ce as f,ye as g,X as h,ue as i,he as j,Z as k,ie as l,ae as m,se as n,H as o,M as p,R as q,fe as r,le as s,oe as t,we as u};
